---
id: convert-rak4631r
title: Конвертация RAK4631-R в RAK4631
sidebar_label: Конвертация RAK4631-R
sidebar_position: 4
description: Инструкция по конвертации RAK4631-R в RAK4631 с помощью Python и adafruit-nrfutil.
---

Единственное отличие между _RAK4631-R_ (RUI3) и _RAK4631_ (Arduino) — предустановленный Bootloader; железо одинаковое.

Meshtastic требует Arduino Bootloader на платах RAK WisBlock на nRF52. Конвертацию Bootloader нужно сделать один раз.

Два способа прошить Bootloader:

## USB DFU

1. Установить [Python](https://www.python.org/downloads/)
2. Установить [adafruit-nrfutil](https://github.com/adafruit/Adafruit_nRF52_nrfutil)
   ```shell
   pip3 install adafruit-nrfutil
   ```
3. Скачать нужный Bootloader: [WisCore_RAK4631_Board_Bootloader.zip](https://github.com/RAKWireless/WisBlock/releases/download/0.4.2/WisCore_RAK4631_Board_Bootloader.zip)
4. Подключить RAK по USB.
5. Прошить Bootloader
   ```shell
   adafruit-nrfutil --verbose dfu serial --package ./WisCore_RAK4631_Board_Bootloader.zip  -p /dev/ttyACM0 -b 115200 --singlebank --touch 1200
   ```
   Примечание: имя Serial-порта (`/dev/ttyACM0`) может отличаться в зависимости от ОС. Убедитесь, что используете правильный порт.
6. Дальше — обычная [инструкция по прошивке](/docs/getting-started/flashing-firmware/nrf52/drag-n-drop)

### Доп. шаги для RUI3

Если шаги выше завершаются ошибками вроде:

```bash
Touched serial port COM11
Opened serial port COM11
Starting DFU upgrade of type 2, SoftDevice size: 0, bootloader size: 39000, application size: 0
Sending DFU start packet
Timed out waiting for acknowledgement from device.
Failed to upgrade target. Error is: No data received on serial port. Not able to proceed.
```

Выполните первую часть (до команды `AT+BOOT`) из инструкции [Конвертация RAK4631-R в RAK4631](https://docs.rakwireless.com/product-categories/wisblock/rak4631-r/dfu/#converting-rak4631-r-to-rak4631).

## Отладчик

Для этой конвертации нужен либо [DAPLink](https://daplink.io/), либо [J-Link](https://www.segger.com/products/debug-probes/j-link/). Самый доступный — [RAKDAP1](https://msh.to/rakdap1/).

1. Установить [Python](https://www.python.org/downloads/)
2. Установить [pyOCD](https://pyocd.io/)
   ```shell
   pip3 install pyocd
   ```
3. Скачать нужный Bootloader: [WisCore_RAK4631_Board_Bootloader.hex](https://github.com/RAKWireless/WisBlock/releases/download/0.4.2/WisCore_RAK4631_Board_Bootloader.hex)
4. Подключить RAKDAP как на схеме:
   [<img src="/img/rak4631-rakdap1.webp" style={{zoom:'25%'}} />](/img/rak4631-rakdap1.webp)
5. Прошить Bootloader
   ```shell
   pyocd flash -t nrf52840 .\WisCore_RAK4631_Board_Bootloader.hex
   ```
6. Дальше — обычная [инструкция по прошивке](/docs/getting-started/flashing-firmware/nrf52/drag-n-drop)

Альтернативные способы прошивки описаны [здесь](https://github.com/RAKWireless/WisBlock/tree/master/bootloader/RAK4630).