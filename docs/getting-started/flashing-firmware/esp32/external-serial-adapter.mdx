---
id: external-serial-adapter
title: Прошивка через внешний Serial-адаптер
sidebar_label: Внешний Serial-адаптер (для опытных)
sidebar_position: 4
description: Как прошить прошивку Meshtastic на устройство на ESP32 с помощью внешнего USB-Serial адаптера.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Link from "@docusaurus/Link";

:::Информация
Это пригодится, только если вы уже прошли подготовку и шаги из раздела [ручная прошивка](/docs/getting-started/flashing-firmware/esp32/cli-script)
:::

:::Осторожно
Не включайте радио без подключённой антенны! Можно повредить радиочип.
:::

## Зачем это нужно

Когда может понадобиться внешний USB-Serial адаптер:

- Из-за дефицита чипов новые устройства, например TTGO T-Beam, могут приходить с устаревшими или нестандартными USB-Serial чипами, которые иногда работают нестабильно.
- На некоторых устройствах USB-Serial чип может быть неисправен.
- Некоторые устройства, например [Hydra](https://github.com/Hydra-Designs/project-hydra-meshtastic-pcb) (Meshtastic-DIY).

### USB-Serial адаптеры

В продаже много вариантов. Рекомендуем адаптер на чипе Silicon Labs CP2102 — это надёжный отраслевой стандарт.

Адаптер, показанный в этом документе:
https://www.amazon.com/gp/product/B078W5L8W1/

Вставьте адаптер в компьютер, пока не подключая к нему устройство. Убедитесь, что драйвер для адаптера установлен. В Windows нужный драйвер обычно ставится автоматически.
![изображение](https://user-images.githubusercontent.com/9000580/168445869-f73667f5-0169-46fd-ae13-15c3abad31aa.png)

### Подключение адаптера к устройству

:::Информация
Подключить пины можно по‑разному: прижать джамперы к контактам, использовать прижимные держатели с pogo-пинами и т.д. В этом руководстве показаны скошенные Dupont‑пины, запаянные в нужные GPIO, и соединение джамперами.
:::
Перед началом отсоедините USB-Serial адаптер от компьютера.

1. Подключите RX адаптера к TX устройства
2. Подключите TX адаптера к RX устройства
3. Подключите GND адаптера к GND устройства
4. Подключите либо 5V адаптера к 5V устройства (как на схеме), либо 3.3V адаптера к 3.3V устройства
5. Перемкните GPIO0 и GND на устройстве джампером (это переведёт устройство в режим прошивки при подаче питания)
   Пример подключения для T-Beam
   ![изображение](https://user-images.githubusercontent.com/9000580/168446438-d14f34a0-b92d-4716-87fd-e0c2927a35fd.png)
6. Подключите устройство к USB-порту компьютера
7. Снимите перемычку между GPIO0 и GND
   ![enter-flash-mode](https://user-images.githubusercontent.com/9000580/168446974-c31d3e9c-3397-4cb1-90a4-91ef2e4d5fac.gif)

### Прошивка

После шагов выше устройство должно быть в режиме прошивки. Можно прошить его [ручным способом](/docs/getting-started/flashing-firmware/esp32/cli-script)

После завершения прошивки перезагрузите устройство (кнопкой RST, если есть).
Если установлен Meshtastic Python CLI, выполните `meshtastic --noproto`, чтобы снова подключиться к устройству через адаптер и посмотреть вывод по Serial — так вы подтвердите, что Meshtastic установился корректно.
![изображение](https://user-images.githubusercontent.com/9000580/168447159-71a6546a-f487-4bc2-86c1-4c489b2a8975.png)

### Диагностика

В скриптах ручной установки может появиться ошибка прав доступа к COM-порту — причин может быть несколько.

Попробуйте запустить от администратора, проверьте, что софт вроде Cura не держит COM‑порты, или перезагрузитесь.

## Подключение и начальная настройка

После прошивки Meshtastic на устройство можно переходить к первичной настройке.

<div className="indexCtasBody">
  <Link
    className={"button button--outline button--lg cta--button"}
    to={"/docs/getting-started/initial-config"}
  >
    Подключить и настроить
  </Link>
</div>