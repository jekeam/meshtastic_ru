---
id: device
title: "Настройки устройства"
sidebar_label: "Устройство"
description: "О ролях устройства (Client, Repeater, Router и др.) и других настройках Device."
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { Icon } from "@iconify/react";

Опции Device: Role, Rebroadcast Mode, GPIO для кнопки, GPIO для PWM‑зуммера, Node Info Broadcast Seconds, Double Tap as Button Press, Disable Triple Click, Timezone Definition и LED Heartbeat Disabled. Настройки Device отправляются админ‑сообщением с protobuf `Config.Device`.

## Device Config Values

## Роли

| Device Role    | Description                                                                                                                                                      | Best Uses                                                                                                                                                   |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| CLIENT         | Приложение подключено или автономное устройство для сообщений. Ретранслирует пакеты, если этого не сделал никто другой.                                          | Универсально для личной связи в Mesh с поддержкой клиентских приложений.                                                                                    |
| CLIENT_MUTE    | Устройство не пересылает пакеты от других.                                                                                                                       | Когда нужно участвовать в сети, но не помогать маршрутизации, снижая нагрузку на сеть.                                                                      |
| CLIENT_HIDDEN  | Передает только по необходимости — для скрытности или экономии энергии.                                                                                          | Для скрытых/экономичных развертываний: меньше эфира/потребления, но участие в сети сохраняется.                                                             |
| CLIENT_BASE    | Личная базовая станция: всегда ретранслирует пакеты от/к избранным узлам. Остальные пакеты обрабатывает как CLIENT.                                              | Сильные «базовые» узлы на чердаке/крыше для широкого распространения сообщений от ваших более слабых/внутренних/неудачно расположенных узлов.              |
| TRACKER        | Приоритет на пакеты GPS‑позиции.                                                                                                                                 | Отслеживание людей или объектов, где важны своевременные и эффективные обновления местоположения.                                                           |
| LOST_AND_FOUND | Регулярно отправляет позицию как сообщение в default channel для помощи в поиске устройства.                                                                     | Для восстановления/поиска потерянного устройства.                                                                                                           |
| SENSOR         | Приоритет на телеметрию.                                                                                                                                         | Сбор данных от датчиков (окружающей среды и др.) с эффективным расходом энергии и частыми обновлениями.                                                     |
| TAK            | Оптимизирован для связи с системой ATAK, снижает рутинные передачи.                                                                                              | Интеграция с ATAK (через Meshtastic ATAK Plugin) для связи в тактических/координируемых операциях.                                                          |
| TAK_TRACKER    | Включает автоматические TAK PLI и снижает рутинные передачи.                                                                                                     | Автономная интеграция PLI с ATAK для связи в тактических/координируемых операциях.                                                                          |
| REPEATER [^4] | Инфраструктурный узел: расширяет покрытие, всегда ретранслируя пакеты один раз с минимальными накладными. Не виден в списке узлов.                              | Ставить в стратегических местах для максимального покрытия сети. Устройство не показывается в топологии.                                                   |
| ROUTER         | Инфраструктурный узел: расширяет покрытие, всегда ретранслируя пакеты один раз. Виден в списке узлов.                                                            | Ставить в стратегических местах для максимального покрытия сети. Устройство показывается в топологии.                                                       |
| ROUTER_LATE    | Инфраструктурный узел: всегда ретранслирует пакеты один раз, но после всех остальных, добавляя покрытие для локальных кластеров. Виден в списке узлов.          | Для «мёртвых зон» или повышения надежности кластера узлов, если их размещение не помогает всей mesh. Устройство показывается в топологии.                   |

[^4]: Эта роль устарела начиная с firmware версии 2.7.11

:::tip подсказка
Не уверены, какую роль выбрать? Почитайте пост: [Choosing the Right Device Role](/blog/choosing-the-right-device-role/)
:::

Ищете ROUTER_CLIENT? Эта роль устарела в firmware 2.3.15. Подробнее в [релиз-нотах 2.3.15](https://github.com/meshtastic/firmware/releases/tag/v2.3.15.deb7c27)

### Сравнение ролей

В таблице показаны значения по умолчанию после выбора пресета. Любые параметры можно изменить после выбора пресета.

| Device Role    | BLE/WiFi/Serial | Screen Enabled | Power Consumption | Retransmit     | Prioritized Routing | Visible in Nodes List |
| -------------- | --------------- | -------------- | ----------------- | -------------- | ------------------- | --------------------- |
| CLIENT         | Yes             | Yes            | Regular           | Yes            | No                  | Yes                   |
| CLIENT_MUTE    | Yes             | Yes            | Lowest            | No             | No                  | Yes                   |
| CLIENT_HIDDEN  | Yes             | Yes            | Lowest            | Local Only     | No                  | No                    |
| CLIENT_BASE    | Yes             | Yes            | Regular           | Yes            | Favorites Only[^3]  | Yes                   |
| TRACKER        | Yes             | No             | Regular / Low     | Awake Only[^1] | No                  | Yes                   |
| LOST_AND_FOUND | Yes             | No             | Regular           | Yes            | No                  | Yes                   |
| SENSOR         | Yes             | No             | Regular / Low     | Awake Only[^1] | No                  | Yes                   |
| TAK            | Yes             | Optional       | Regular           | Yes            | No                  | Yes                   |
| TAK_TRACKER    | Yes             | Optional       | Regular           | Yes            | No                  | Yes                   |
| ROUTER         | No[^2]          | No             | High              | Yes            | Yes                 | Yes                   |
| ROUTER_LATE    | Yes             | Yes            | High              | Yes            | No                  | Yes                   |
| REPEATER       | Yes             | No             | High              | Yes            | Yes                 | No                    |

[^1]: **Awake Only** означает, что ретрансляция идет как обычно, но не во время сна между интервалами передач.

[^2]: Роль `ROUTER` по умолчанию включает [Power Saving](/docs/configuration/radio/power/#power-saving) (только ESP32). Если нужно обновить `ROUTER` через BLE, рекомендуется использовать админ‑канал, временно сменить роль для обновления и затем вернуть обратно.

[^3]: **Favorites Only** означает, что `CLIENT_BASE` будет приоритизировать пакеты от/к избранным узлам. На `CLIENT_BASE` добавьте в избранные все ваши другие узлы, которые обычно в зоне уверенной связи вашей базовой станции `CLIENT_BASE`.

## Примечания о Power Saving и поведении ролей

### Только платформа ESP32

Все роли, кроме `TRACKER` и `SENSOR`, поддерживают обычный режим _sleep_ через `power.is_power_saving`. Когда узел засыпает, как правило, консоль Serial, периферия, GPS и Wi‑Fi/Bluetooth выключаются для экономии. CPU уходит в пониженное энергопотребление (light sleep или deep sleep на ESP32). Радио LoRA остается в режиме standby для приема пакетов, которые «разбудят» устройство для возобновления работы.

Таймауты `display.screen_on_secs` (таймаут экрана), `power.min_wake_secs` (минимальное время до сна) и `power.wait_bluetooth_secs` (таймаут Bluetooth) задерживают переход узла в сон. Таймауты и переход в сон также могут _сбрасываться_ внешними событиями: прием пакета, нажатие кнопки, подключение клиента по Serial и т. п.

Для роли `ROUTER` `power.is_power_saving` включается автоматически и его нельзя отключить.

### Платформы ESP32 и NRF52

В ролях `TRACKER` и `SENSOR` при `power.is_power_saving` действуют особые режимы сна. Для `TRACKER` устройство засыпает на `position.position_broadcast_secs`, при пробуждении отправляет позицию при наличии валидного GPS и повторяет цикл. Для `SENSOR` устройство засыпает на `telemetry.environment_update_interval`, при пробуждении собирает данные окружения, отправляет телеметрию и повторяет цикл. В обоих случаях радио LoRA не остается в standby для приема пакетов и пробуждения устройства. Сон ограничен их интервалами передачи.

## Rebroadcast Mode

Определяет поведение устройства при ретрансляции сообщений.

|        Value         |                                                                                                  Description                                                                                                  |
| :------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|        `ALL`         | ALL (по умолчанию) — ретранслирует ВСЕ сообщения из основного Mesh, а также из других Mesh с теми же настройками модема, даже если отличаются настройки шифрования.                                          |
| `ALL_SKIP_DECODING`  | ALL_SKIP_DECODING — как ALL, но пропускает декодирование пакетов и просто ретранслирует их. **Доступно только с ролью Repeater.**                                                                           |
|     `LOCAL_ONLY`     | LOCAL_ONLY — игнорирует сообщения из чужих Mesh, которые открыты или не могут быть расшифрованы. Ретранслирует только сообщения на локальных primary/secondary каналах узла.                                 |
|     `KNOWN_ONLY`     | KNOWN_ONLY — как LOCAL_ONLY, но дополнительно игнорирует сообщения от nodenums, которых нет в списке известных узлов (NodeDB).                                                                               |
|        `NONE`        | NONE — разрешено только для ролей SENSOR, TRACKER и TAK_TRACKER; полностью запрещает ретрансляцию, похоже на роль CLIENT_MUTE.                                                                               |
| `CORE_PORTNUMS_ONLY` | CORE_PORTNUMS_ONLY — игнорирует пакеты с нестандартными portnums (например: TAK, RangeTest, PaxCounter и т. п.). Ретранслирует только стандартные: NodeInfo, Text, Position, Telemetry и Routing.            |

## GPIO для кнопки пользователя

Номер GPIO, который будет использоваться для пользовательской кнопки, если на устройстве нет своей.

## GPIO для PWM‑зуммера

Номер GPIO, который будет использоваться для PWM‑зуммера, если на устройстве нет своего.

## Интервал трансляции NodeInfo (сек)

Число секунд между передачами NodeInfo (содержит, в т. ч., короткое и длинное имя). Устройство также отвечает на запросы NodeInfo по требованию. Когда устройство слышит пакет от неизвестного узла, оно отправляет свой NodeInfo и автоматически запрашивает ответ.

## Двойной тап = нажатие кнопки

Позволяет считать двойной тап (если к устройству подключен поддерживаемый акселерометр) нажатием кнопки.

## Отключить тройное нажатие

Отключает тройное нажатие кнопки пользователя для включения/выключения GPS.

## TZDEF (часовой пояс)

Параметр `tzdef` задает локальное смещение для устройства. Используется формат базы TZ Database, чтобы правильно показывать локальное время на дисплее и в логах.

Чтобы задать часовой пояс, используйте строку POSIX TZ Database для нужного региона. Список [поддерживаемых таймзон](https://github.com/nayarsystems/posix_tz_db/blob/master/zones.csv). Например, для региона `America/Los_Angeles` задайте `PST8PDT,M3.2.0,M11.1.0`.

## Отключить мигание LED

Если true — отключает стандартное мигание LED (LED_PIN) на устройстве.

## Доступность в клиентах

<Tabs
  groupId="settings"
  defaultValue="apple"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:android" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Android
        </>
      ),
      value: "android",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Apple
        </>
      ),
      value: "apple",
    },
    {
      label: (
        <>
          <Icon icon="mdi:terminal" height="1.5rem" style={{ marginRight: "0.25rem" }} /> CLI
        </>
      ),
      value: "cli",
    },
    {
      label: (
        <>
          <Icon icon="mdi:internet" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Web
        </>
      ),
      value: "web",
    },
  ]}>

<TabItem value="android">

#### Android

:::info заметка

Настройки Device доступны на Android.

1. Откройте приложение Meshtastic
2. Перейдите: **Vertical Ellipsis (3 точки сверху справа) > Radio Configuration > Device**

:::

</TabItem>
<TabItem value="apple">

#### Apple

:::info заметка
Все настройки Device, кроме NTP Server, доступны на iOS, iPadOS и macOS: Settings > Device Configuration > Device.
:::

</TabItem>
<TabItem value="cli">

#### CLI

:::info заметка

Все опции Device доступны в python CLI. Примеры ниже:

:::

| Setting                           | Acceptable Values                                                  | Default           |
| --------------------------------- | ------------------------------------------------------------------ | ----------------- |
| device.role                       | `CLIENT`, `CLIENT_MUTE`, `ROUTER`, `REPEATER`, `TRACKER`, `SENSOR` | `CLIENT`          |
| device.rebroadcast_mode           | `ALL`, `ALL_SKIP_DECODING`, `LOCAL_ONLY`                           | `ALL`             |
| device.button_gpio                | `0` - `34`                                                         | `0`               |
| device.buzzer_gpio                | `0` - `34`                                                         | `0`               |
| device.node_info_broadcast_secs   | `3600` - `UINT MAX`                                                | `10800` (3 часа)  |
| device.double_tap_as_button_press | `false`, `true`                                                    | `false`           |
| device.disable_triple_click       | `false`, `true`                                                    | `false`           |

:::tip подсказка

Так как устройство перезагружается после каждой команды из CLI, при настройке нескольких значений в одном разделе удобнее связать их в одну команду.

```shell title="Пример:"
meshtastic --set device.role CLIENT --set device.tzdef UTC0
```

:::

```shell title="Назначить роль CLIENT"
meshtastic --set device.role CLIENT
```

```shell title="Задать tzdef"
meshtastic --set device.tzdef UTC0
```

</TabItem>
<TabItem value="web">

#### Web

:::info заметка
Все параметры Device доступны в Web UI.
:::

</TabItem>
</Tabs>
