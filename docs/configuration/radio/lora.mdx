---
id: lora
title: Настройки LoRa
sidebar_label: LoRa
description: Разбираем настройки LoRa на устройстве Meshtastic регион, модем, число хопов и другое
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { Icon } from "@iconify/react";
import LoRaRegions from "../../blocks/_lora-regions.mdx";

Опции LoRa: Region, Use Preset, Modem Preset, Max Hops, Transmit Power, Bandwidth, Spread Factor, Coding Rate, Frequency Offset, Transmit Enabled, Frequency Slot, Ignore Incoming Array, Ignore MQTT, Override Duty Cycle Limit, SX126x RX Boosted Gain, Override Frequency и PA Fan Disabled. Конфиг LoRa передаётся админ‑сообщением `Config.LoRa` (protobuf).

:::note заметка
Чтобы узлы в одной Mesh нормально общались, у них должны совпадать Region и Modem Preset, либо совпадать кастомные настройки модема.
:::

## Параметры LoRa {#lora-config-values}

:::note заметка
Обязательно задайте параметр `lora.region`. Это поможет работать в рамках местных требований.
:::

### Region {#region}

Задаёт регион для вашего node. По умолчанию — `unset`. Пока не задано, экран node покажет сообщение, и пакеты передаваться не будут.

<LoRaRegions />

### Use Preset {#use-preset}

Если включено — используются поля `Modem Preset`. Если выключено — берутся ручные значения из `Bandwidth`/`Spread Factor`/`Coding Rate`.

### Modem Preset {#modem-preset}

По умолчанию `unset`, что равно `LONG_FAST`. Пресеты — это заранее заданные параметры модема (Bandwidth, Spread Factor, Coding Rate), влияющие на скорость и дальность. Значение по умолчанию даёт хороший баланс скорости и дальности для большинства.

Пресеты позволяют сильнее оптимизировать либо скорость (и снизить загруженность сети), либо дальность, что полезно в двух кейсах:

1. В Mesh много устройств или сообщения идут очень часто. Более высокая скорость (и меньшее радио‑время на устройство) помогает разгрузить сеть.
2. Нужна максимальная дальность, и допустима задержка доставки на несколько секунд (например, из города на отдалённую вершину).

Доступные пресеты расположены по шкале: Самый быстрый \<\-\-\> Самый медленный и Минимальная \<\-\-\> Максимальная дальность:

1. `SHORT_TURBO` (самый быстрый, максимальная полоса, минимальное эфирное время, минимальная дальность. Не везде легален из‑за полосы 500 kHz.)
2. `SHORT_FAST`
3. `SHORT_SLOW`
4. `MEDIUM_FAST`
5. `MEDIUM_SLOW`
6. `LONG_FAST` (по умолчанию)
7. `LONG_MODERATE`
8. `LONG_SLOW`
9. `VERY_LONG_SLOW` (самый медленный, минимальная полоса, максимальное эфирное время, максимальная дальность. Не рекомендуется для повседневного использования: плохо формирует Mesh и ненадёжно.)

### Max Hops {#max-hops}

Максимальное число хопов. Не больше 7. По умолчанию 3 — этого хватает почти всегда. _**Серьёзно, 3 хватает.**_

![Число хопов](/img/configuration/max-hops.webp)

### Transmit Power {#transmit-power}

Если 0 — используется максимальная легальная непрерывная мощность по умолчанию (не сожжёт радио).

В большинстве случаев ставьте 0. Единицы — dBm.

### Bandwidth {#bandwidth}

Некоторые значения полосы «особые» — прошивка конвертирует их во float:

| Спец. значение | Интерпретируется как |
| :------------: | :------------------: |
|       31       |      31.25 kHz       |
|       62       |       62.5 kHz       |
|      200       |     203.125 kHz      |
|      400       |      406.25 kHz      |
|      800       |      812.5 kHz       |
|      1600      |      1625.0 kHz      |

Значения < 62.5 kHz на части железа требуют TCXO.

### Spread Factor {#spread-factor}

Число от 7 до 12. Количество чирпов на символ: 1[\<\<]spread_factor.

### Coding Rate {#coding-rate}

Знаменатель кода (CR). Для 4/5 — 5, для 4/8 — 8.

### Frequency Offset {#frequency-offset}

Параметр для продвинутых и с измерительным оборудованием — обычно не нужен.

Смещение, добавляемое к расчётной центральной частоте. Используется для коррекции ошибки кварца.

### Transmit Enabled {#transmit-enabled}

Включает/выключает передачу (TX) у радио LoRa. Полезно для горячей замены антенн и тестов.

По умолчанию: true.

### Frequency Slot {#frequency-slot}

Определяет реальную частоту передачи железа через номер слота: от 1 до NUM_SLOTS (максимум для текущего региона и пресета модема). Если `0`/UNSET — используется старый алгоритм на основе хэша имени канала.

### Ignore Incoming Array {#ignore-incoming-array}

Для тестов можно заставить node «не слышать» конкретные другие узлы (симуляция вне зоны). Все `nodenums` из массива ignore_incoming будут отбрасывать входящие пакеты (в `router.cpp`).

### Ignore MQTT {#ignore-mqtt}

Если включить (true) — устройство игнорирует любые LoRa‑сообщения, которые по пути пришли через MQTT. Работает, только если у устройства и MQTT‑узла прошивка не ниже 2.2.19.

### OK to MQTT {#ok-to-mqtt}

Допустимые значения: `true`, `false`

По умолчанию `false`. Если `true` — вы разрешаете отправку ваших пакетов в MQTT брокеры. Если `false` — узлы, получающие ваши пакеты, просят не ретранслировать их в MQTT. Применяется только к Channels с ключами `defaultpsk` и `eventpsk` в прошивке Meshtastic; каналы с кастомными ключами игнорируют этот флаг.

**Важно:** это не криптографическая защита, а вежливая просьба, поддерживаемая официальной прошивкой.

### Override Duty Cycle Limit {#override-duty-cycle-limit}

Если включить — устройство игнорирует почасовой лимит duty cycle в Европе. Можно нарушить правила, если будет слишком много передач. По умолчанию отключено (`false`): устройство перестанет передавать при достижении лимита и возобновит, когда можно.

### SX126x RX Boosted Gain {#sx126x-rx-boosted-gain}

Опция для серии чипов SX126x: немного повышает потребление ради увеличения чувствительности RX.

### Override Frequency {#override-frequency}

Для продвинутых и лицензированных радиолюбителей (HAM). Если включено — расчёт частоты по каналу игнорируется и используется заданная частота (frequency_offset остаётся в силе). Позволяет работать вне стандартного диапазона. Соблюдайте местные правила. Если вы лицензированный HAM, включите HAM mode и отключите шифрование.

### PA Fan Disabled {#pa-fan-disabled}

Если true — отключает встроенный PA FAN, определённый пином RF95_FAN_EN.

## Доступность настроек LoRa в клиентах {#lora-config-client-availability}

<Tabs
  groupId="settings"
  defaultValue="apple"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:android" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Android
        </>
      ),
      value: "android",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Apple
        </>
      ),
      value: "apple",
    },
    {
      label: (
        <>
          <Icon icon="mdi:terminal" height="1.5rem" style={{ marginRight: "0.25rem" }} /> CLI
        </>
      ),
      value: "cli",
    },
    {
      label: (
        <>
          <Icon icon="mdi:internet" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Web
        </>
      ),
      value: "web",
    },
  ]}>
<TabItem value="android">

#### Android {#android}

:::info информация

Опции LoRa доступны на Android.

1. Откройте приложение Meshtastic
2. Перейдите: **Вертикальное многоточие (3 точки сверху справа) > Конфигурация радио > LoRa**

:::

</TabItem>
<TabItem value="apple">

#### Apple {#apple}

:::info информация
Все опции LoRa доступны на iOS, iPadOS и macOS: Settings > Конфигурация радио > LoRa.
:::

</TabItem>
<TabItem value="cli">

#### CLI {#cli}

:::info информация

Команды LoRa доступны в python CLI. Примеры ниже:

:::

|        Параметр         |                                                                     Допустимые значения                                                                     | По умолчанию |
| :---------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------: | :----------: |
|    lora.modem_preset    |                    `LONG_FAST`, `LONG_SLOW`, `VERY_LONG_SLOW`, `MEDIUM_SLOW`, `MEDIUM_FAST`, `SHORT_SLOW`, `SHORT_FAST`, `SHORT_TURBO`                     |  `LONG_FAST` |
|     lora.use_preset     |                                                                      `false`, `true`                                                                         |    `false`   |
|       lora.region       | `UNSET`, `US`, `EU_433`, `EU_868`, `CN`, `JP`, `ANZ`, `ANZ_433`, `KR`, `TW`, `RU` ,`IN`, `NZ_865`, `TH`, `LORA_24`, `UA_433`, `UA_868`, `MY_433`, `MY_919`, `SG_923`, `KZ_433`, `KZ_863`, `BR_902`, `NP_865` |    `UNSET`   |
|     lora.bandwidth      |                                                                 `31`, `62`, `125`, `250`, `500`                                                              |     `250`    |
|   lora.spread_factor    |                                                             `7`, `8`, `9`, `10`, `11`, `12`                                                                  |     `12`     |
|    lora.coding_rate     |                                                                         `5`, `6`, `7`, `8`                                                                   |      `8`     |
|  lora.frequency_offset  |                                                                      `0` до `1000000`                                                                        |      `0`     |
|     lora.hop_limit      |                                                                `1`,`2`,`3`,`4`,`5`,`6`,`7`                                                                  |      `3`     |
|      lora.tx_power      |                                                                         `0` до `30`                                                                          |      `0`     |
|     lora.tx_enabled     |                                                                      `false`, `true`                                                                         |    `true`    |
|    lora.channel_num     |                                                                  `0`, `1` до `NUM_CHANNELS`                                                                 |      `0`     |
|    lora.ignore_mqtt     |                                                                      `false`, `true`                                                                         |    `false`   |
| lora.config_ok_to_mqtt  |                                                                      `true`, `false`                                                                         |    `false`   |
| lora.override_duty_cycle|                                                                      `false`, `true`                                                                         |    `false`   |
|lora.sx126x_rx_boosted_gain|                                                                    `false`, `true`                                                                         |    `false`   |
| lora.override_frequency |           Любая частота, поддерживаемая радио LoRa. Соблюдайте местные правила и ограничения.                                                                |      `0`     |

:::tip совет

Так как устройство перезагружается после каждой команды из CLI, лучше задавать несколько параметров одной связкой.

```shell title="Пример:"
meshtastic --set lora.region US --set lora.modem_preset LONG_FAST
```

:::

```shell title="Пресет модема"
meshtastic --set lora.modem_preset LONG_FAST
meshtastic --set lora.modem_preset MEDIUM_FAST
```

```shell title="Регион"
meshtastic --set lora.region US
meshtastic --set lora.region EU_433
```

```shell title="Лимит хопов"
meshtastic --set lora.hop_limit 2
```

```shell title="Игнорировать duty cycle"
meshtastic --set lora.override_duty_cycle true
meshtastic --set lora.override_duty_cycle false
```

</TabItem>
<TabItem value="web">

#### Web {#web}

:::info информация
Все опции LoRa доступны в Web UI.
:::

</TabItem>
</Tabs>
