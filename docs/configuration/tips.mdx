---
id: tips
title: Советы по настройке
description: Советы и решения, чтобы выжать максимум из устройства и сети Meshtastic.
sidebar_label: Советы
sidebar_position: 4
---

import QRCode from "@site/docs/blocks/_qr-code.mdx";

## Роли {#roles}

Настоятельно рекомендуем держать вашу [ROLE](/docs/configuration/radio/device#roles) в значении `CLIENT`, `CLIENT_MUTE` или `CLIENT_BASE`. Другие роли используйте только при чётком понимании, зачем это нужно. Прочитайте наш [пост о выборе роли](/blog/choosing-the-right-device-role/).

### Рекомендуемые роли {#recommended-roles}

- Ноды (Node) с ролью `CLIENT` принимают, отправляют и умно повторяют сообщения, помогая Mesh-сети.
  - Это правильный выбор в большинстве случаев.
  - Автоматически добавляет смарт‑задержки при ретрансляции для стабильности сети.
  - Отлично подходит для нод, которые могут помогать другим: на крыше, в видимых местах, либо для расширения покрытия.
  - Используйте в удалённых местах (походы, лыжи, вело), где каждая нода помогает держать связь.

- Ноды `CLIENT_MUTE` могут отправлять и принимать сообщения, но никогда их не повторяют.
  - Подходит для личного портативного устройства рядом с более мощной нодой (например, на крыше) в перегруженной сети.
  - Используйте, когда несколько нод находятся близко: лучшую по расположению поставьте `CLIENT`, остальные — `CLIENT_MUTE`.
  - Идеальны для нод в помещении, общающихся только с одной уличной нодой — повторение всё равно не достанет до других и лишь забьёт эфир.

- Ноды `CLIENT_BASE` приоритезируют ретрансляцию сообщений от ваших других личных нод.
  - Используйте для более мощной или удачно расположенной ноды на чердаке/крыше, чтобы шире раздавать сообщения от ваших слабых, внутренних или плохо расположенных нод.
  - Одну ноду назначьте `CLIENT_BASE`. Остальные ноды (обычно `CLIENT` или `CLIENT_MUTE`) добавьте в избранное на `CLIENT_BASE`.
  - Отлично, чтобы все близкие ноды по максимуму использовали вашу сильную ноду на чердаке/крыше.

![Пример ноды CLIENT](/img/configuration/client.webp)
*Один из примеров ноды «Client». Фото: Cully@KBOXLABS*

### Избегайте `ROUTER` и `REPEATER` {#avoid-router-and-repeater}

Необоснованное использование ролей `ROUTER` или `REPEATER` может вызвать серьёзные проблемы в сети:

- Больше риска коллизий пакетов.
- Ниже доля доставленных сообщений.
- Меньше эффективная дальность сети из‑за лишних переходов (hop).

Эти роли предназначены для узких задач. Перед сменой с `CLIENT` внимательно [изучите документацию](/docs/configuration/radio/device#roles), чтобы понять последствия. Также согласуйте изменения с вашим локальным сообществом, чтобы эффект был положительным, а не отрицательным.

Помните: сеть из нод `CLIENT` с небольшим числом хорошо размещённых `ROUTER` обычно самая эффективная и стабильная.

![Пример ноды ROUTER](/img/configuration/router.webp)
*Один из примеров ноды «Router». Фото: Cully@KBOXLABS*

## Как (не) делиться локацией {#not-sharing-your-location}

Телеметрия отправляется в ваш [PRIMARY Channel](/docs/configuration/radio/channels#role). Это означает, что если нода получила координаты от встроенного GPS или от телефона, ваши координаты уйдут в Mesh по этому каналу, с его шифрованием (если включено).

По умолчанию PRIMARY называется LongFast с ключом шифрования "AQ==" (Base64 эквивалент Hex 0x01). Если это не менять, вашу локацию увидят все ноды в радиусе, которые тоже используют канал по умолчанию.

### Точность позиции {#using-position-precision}

Meshtastic поддерживает управление точностью данных локации, отправляемых в конкретный канал.

Настройка `position_precision` позволяет контролировать точность координат, отправляемых по каналу. Полезно для приватности, когда не хочется раскрывать точное местоположение на некоторых каналах.

Подробнее о настройках точности и их конфигурации читайте в разделе [Position Precision](/docs/configuration/radio/channels/#position-precision).

### Локация в приватном вторичном канале {#sharing-location-on-a-private-secondary-channel}
> Это новая функция, работает только с Firmware 2.7.1+

Чтобы делиться локацией в приватном вторичном канале и оставить основной канал без шифрования:

1. Выключите отправку локации в основном канале (Channel 0), чтобы не вещать позицию всем.
2. Выберите вторичный канал, где хотите делиться локацией. Включите отправку позиции и задайте нужную точность.
3. Как работают автообновления локации:
   - Только один канал получает ваши автоматические «живые» обновления.
   - Это вторичный канал с наименьшим индексом (кроме Channel 0) с включённой отправкой локации.
   - Если таких каналов несколько, автообновления пойдут только в канал с самым низким индексом.
   - Каналы с включённой отправкой локации, но без автообновлений, всё равно можно использовать для ручных запросов позиции.

#### Пример {#example-scenario}

Допустим, вы в следующих каналах:

- Channel 0: “Everyone” (location OFF)
- Channel 1: “CampChat” (location ON)
- Channel 2: “Friends” (location ON)
- Channel 3: “TutuTuesdayGroup” (location OFF)

##### Как это работает {#how-it-works}
- CampChat (Channel 1) получает ваши «живые» автообновления, потому что это канал с самым низким индексом с включённой отправкой локации.
- Friends (Channel 2) может запрашивать вашу позицию вручную, но автообновления не получает.
- TutuTuesdayGroup (Channel 3) — только чат, без отправки/получения локации.

## Ретрансляция «публичного» трафика {#rebroadcast-public-traffic}

Ноды Meshtastic ретранслируют все пакеты, если совпадают [настройки модема LoRa](/docs/configuration/radio/lora#lora-config-values), независимо от шифрования (если только [Rebroadcast mode](/docs/configuration/radio/device#rebroadcast-mode) не установлен в `LOCAL_ONLY`).

:::note заметка
Если вы хотите, чтобы ваши ноды включались в «публичный» Mesh, используйте пресет модема по умолчанию — [modem preset](/docs/configuration/radio/lora#modem-preset) `LONG_FAST`. Если вы меняли имя PRIMARY канала, вручную выставьте канал LoRa по умолчанию для вашего региона (см. выше).
:::

### Количество переходов (Hop Count) {#hop-count}

Мы настоятельно рекомендуем оставить [MAX HOPS](/docs/configuration/radio/lora#max-hops) равным 3, если только вы не уверены, что нужно больше (или меньше), чтобы достичь целевой ноды. Излишне большой hop count часто приводит к проблемам в сети. Если повышаете его, делайте это только на нодах на «краях» сети, не в центре.

![Иллюстрация Hop Count](/img/configuration/max-hops.webp)

## Чат‑каналы и слоты частоты LoRa {#chat-channels-and-lora-frequency-slots}

Раньше в Meshtastic слово «channels» использовалось для двух разных настроек: Messaging Channels и LoRa Channel Numbers. Это путало, ведь речь шла о разных вещах. Чтобы прояснить, «LoRa Channel Number» переименовали в «LoRa Frequency Slot» (слот частоты LoRa).

### Radio Config: Channels (Настройки радио: Каналы) {#radio-config-channels}

Задают «группы сообщений» и включают ваш PRIMARY и SECONDARY каналы. Все SECONDARY используют те же настройки модема LoRa, что и PRIMARY (включая слот частоты LoRa).

Всего 8 каналов для сообщений. Channel 0 — ваш PRIMARY, каналы 1–7 доступны для приватных групп и/или спецканалов, таких как [`admin`](/docs/configuration/remote-admin).

### Radio Config: LoRa Frequency Slot (Настройки радио: слот частоты LoRa) {#radio-config-lora-frequency-slot}

Эта настройка (раньше — «LoRa Channel Number») задаёт рабочую частоту радиомодуля. Посмотрите [калькулятор частот](/docs/overview/radio-settings#frequency-slot-calculator), чтобы понять соответствие «frequency slot» и радиочастоты.

## Рекомендации {#best-practices}

- Если вы в большой Mesh и не знаете, что делает настройка — не меняйте её (если только очень не любопытно).
- ТЕСТИРУЙТЕ настройки и железо перед установкой в труднодоступных местах.
- Подключение ноды к [публичному MQTT‑серверу](/docs/configuration/module/mqtt#connect-to-the-default-public-server) может опубликовать локации всех нод вашей сети в интернет.